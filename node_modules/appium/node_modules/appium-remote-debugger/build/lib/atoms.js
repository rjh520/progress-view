"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAtom = getAtom;
exports.default = void 0;

require("source-map-support/register");

var _appiumSupport = require("appium-support");

var _path = _interopRequireDefault(require("path"));

var _lodash = _interopRequireDefault(require("lodash"));

const atomsCache = {};

async function getAtom(atomName) {
  const atomFileName = __filename.includes('build/lib/atoms') ? _path.default.resolve(__dirname, '..', '..', 'atoms', `${atomName}.js`) : _path.default.resolve(__dirname, '..', 'atoms', `${atomName}.js`);

  if (!_lodash.default.has(atomsCache, atomName)) {
    try {
      atomsCache[atomName] = await _appiumSupport.fs.readFile(atomFileName);
    } catch (e) {
      throw new Error(`Unable to load Atom '${atomName}' from file '${atomFileName}'`);
    }
  }

  return atomsCache[atomName];
}

var _default = getAtom;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9hdG9tcy5qcyJdLCJuYW1lcyI6WyJhdG9tc0NhY2hlIiwiZ2V0QXRvbSIsImF0b21OYW1lIiwiYXRvbUZpbGVOYW1lIiwiX19maWxlbmFtZSIsImluY2x1ZGVzIiwicGF0aCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJfIiwiaGFzIiwiZnMiLCJyZWFkRmlsZSIsImUiLCJFcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBR0EsTUFBTUEsVUFBVSxHQUFHLEVBQW5COztBQUVBLGVBQWVDLE9BQWYsQ0FBd0JDLFFBQXhCLEVBQWtDO0FBQ2hDLFFBQU1DLFlBQVksR0FBR0MsVUFBVSxDQUFDQyxRQUFYLENBQW9CLGlCQUFwQixJQUNuQkMsY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLElBQXhCLEVBQThCLElBQTlCLEVBQW9DLE9BQXBDLEVBQThDLEdBQUVOLFFBQVMsS0FBekQsQ0FEbUIsR0FFbkJJLGNBQUtDLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixJQUF4QixFQUE4QixPQUE5QixFQUF3QyxHQUFFTixRQUFTLEtBQW5ELENBRkY7O0FBS0EsTUFBSSxDQUFDTyxnQkFBRUMsR0FBRixDQUFNVixVQUFOLEVBQWtCRSxRQUFsQixDQUFMLEVBQWtDO0FBQ2hDLFFBQUk7QUFDRkYsTUFBQUEsVUFBVSxDQUFDRSxRQUFELENBQVYsR0FBdUIsTUFBTVMsa0JBQUdDLFFBQUgsQ0FBWVQsWUFBWixDQUE3QjtBQUNELEtBRkQsQ0FFRSxPQUFPVSxDQUFQLEVBQVU7QUFDVixZQUFNLElBQUlDLEtBQUosQ0FBVyx3QkFBdUJaLFFBQVMsZ0JBQWVDLFlBQWEsR0FBdkUsQ0FBTjtBQUNEO0FBQ0Y7O0FBRUQsU0FBT0gsVUFBVSxDQUFDRSxRQUFELENBQWpCO0FBQ0Q7O2VBR2NELE8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcyB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuXG5jb25zdCBhdG9tc0NhY2hlID0ge307XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEF0b20gKGF0b21OYW1lKSB7XG4gIGNvbnN0IGF0b21GaWxlTmFtZSA9IF9fZmlsZW5hbWUuaW5jbHVkZXMoJ2J1aWxkL2xpYi9hdG9tcycpID9cbiAgICBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnLi4nLCAnYXRvbXMnLCBgJHthdG9tTmFtZX0uanNgKSA6XG4gICAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uJywgJ2F0b21zJywgYCR7YXRvbU5hbWV9LmpzYCk7XG5cbiAgLy8gY2hlY2sgaWYgd2UgaGF2ZSBhbHJlYWR5IGxvYWRlZCBhbiBjYWNoZWQgdGhpcyBhdG9tXG4gIGlmICghXy5oYXMoYXRvbXNDYWNoZSwgYXRvbU5hbWUpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF0b21zQ2FjaGVbYXRvbU5hbWVdID0gYXdhaXQgZnMucmVhZEZpbGUoYXRvbUZpbGVOYW1lKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBsb2FkIEF0b20gJyR7YXRvbU5hbWV9JyBmcm9tIGZpbGUgJyR7YXRvbUZpbGVOYW1lfSdgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXRvbXNDYWNoZVthdG9tTmFtZV07XG59XG5cbmV4cG9ydCB7IGdldEF0b20gfTtcbmV4cG9ydCBkZWZhdWx0IGdldEF0b207XG4iXSwiZmlsZSI6ImxpYi9hdG9tcy5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiJ9
